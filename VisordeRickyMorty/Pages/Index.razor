@page "/"
@using VisordeRickyMorty.Models
@using VisordeRickyMorty.Components
@using VisordeRickyMorty.Services
@inject CharactersService characterService
<PageTitle>Visualizador de Rick y Morty</PageTitle>
<head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
	@if (!string.IsNullOrEmpty(errorMessage))
	{
		<p>Error: @errorMessage</p>
	}
	else if (isLoading)
	{
		<p>...Cargando personajes...</p>
	}
	else
	{
		<div class="container mt-4">
			<div class="row g-4 justify-content-center">
				@foreach (var Character in characters)
				{
					<div class="col col-lg-3 d-flex justify-content-center">
						<CharacterGallery character="Character" />
					</div>
				}
			</div>
		</div>
	}
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
@code {
	private List<Character> characters = new();
	private bool isLoading = true;
	private string errorMessage;
	protected override async Task OnInitializedAsync()
	{
		try
		{
			characters = await characterService.GetCharactersAsync();
		}
		catch (Exception ex)
		{
			errorMessage = ex.Message;
		}
		finally
		{
			isLoading = false;
		}

	}
}
